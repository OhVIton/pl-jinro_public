(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{438:function(e,r,t){"use strict";t.d(r,"c",(function(){return n})),t.d(r,"a",(function(){return c})),t.d(r,"e",(function(){return o})),t.d(r,"d",(function(){return l})),t.d(r,"b",(function(){return d}));var n={WAITING:0,DAY:1,CHAT:2,VOTE:3,VOTE_RESULT:4,NIGHT:5,END:-1},c={NONE:0,VILLAGE:1,WOLF:2,TF:3};function o(e){switch(e){case n.WAITING:return"待機中";case n.DAY:return"昼";case n.CHAT:return"チャット";case n.VOTE:return"投票";case n.NIGHT:return"夜";default:return"終了"}}function l(e){switch(e){case c.NONE:return"なし";case c.VILLAGE:return"学生側";case c.WOLF:return"人狼側";case c.TF:return"一限"}}var d={Villager:{name:"学生",description:"単位を死守して卒業を勝ち取れ！",group:c.VILLAGE},Seer:{name:"教務課",description:"人狼かどうかや単位状況を見れる",group:c.VILLAGE},Hunter:{name:"先輩",description:"落単、除籍から守れる。しかし、人狼を守ると除籍されます。",group:c.VILLAGE},Professor:{name:"教授",description:"単位を与えることができる",group:c.VILLAGE},Werewolf:{name:"退学者",description:"選んだ学生を除籍させる",group:c.WOLF},TF:{name:"一限",description:"単位を落とすことができる",group:c.TF}}},440:function(e,r,t){"use strict";t.d(r,"e",(function(){return d})),t.d(r,"f",(function(){return f})),t.d(r,"d",(function(){return m})),t.d(r,"b",(function(){return y})),t.d(r,"g",(function(){return O})),t.d(r,"i",(function(){return w})),t.d(r,"a",(function(){return T})),t.d(r,"h",(function(){return D})),t.d(r,"j",(function(){return L})),t.d(r,"c",(function(){return N}));var n=t(33),c=(t(11),t(36),t(113),t(209)),o=t(438),l=function(e){return null===e?c.a.ref(c.a,"rooms/"):c.a.ref("rooms/".concat(e))};function d(e){return v.apply(this,arguments)}function v(){return(v=Object(n.a)(regeneratorRuntime.mark((function e(r){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l(r),e.next=3,t.once("value");case 3:return n=e.sent,e.abrupt("return",n.exists());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e,r){return h.apply(this,arguments)}function h(){return(h=Object(n.a)(regeneratorRuntime.mark((function e(r,t){var n,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l(r),e.next=3,n.child("users/").once("value");case 3:if(!(c=e.sent).exists()){e.next=10;break}return e.next=7,t;case 7:return e.t0=e.sent,e.t1=c.val(),e.abrupt("return",e.t0 in e.t1);case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return x.apply(this,arguments)}function x(){return(x=Object(n.a)(regeneratorRuntime.mark((function e(r){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l(r),e.next=3,t.once("value");case 3:return n=e.sent,e.abrupt("return",n.child("day").val()>0);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e,r,t){return k.apply(this,arguments)}function k(){return(k=Object(n.a)(regeneratorRuntime.mark((function e(r,t,n){var c,d,i,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(d in c=[],n)for(i=0;i<n[d];i++)c.push(d);return v=l(r),e.next=5,v.set({owner:t,day:0,turn:0,roles:c,messages:[],win:o.a.NONE});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e,r){return _.apply(this,arguments)}function _(){return(_=Object(n.a)(regeneratorRuntime.mark((function e(r,t){var n,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l(r),c=n.child("users"),e.next=4,c.child(t).set({user:t,role:"",done:!1,isDead:!1,unit:!0,deathOfDay:"",isGuarded:!1,votedCnt:0});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e,r,t,n){return j.apply(this,arguments)}function j(){return(j=Object(n.a)(regeneratorRuntime.mark((function e(r,t,n,c){var o,d,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=l(r),d=o.child("messages"),v=d.push().key,e.next=5,d.child(v).set({user:t,message:n,day:c});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return E.apply(this,arguments)}function E(){return(E=Object(n.a)(regeneratorRuntime.mark((function e(r){var t,n,c,o,d,v,f,i,h,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l(r),n=t.child("roles"),e.next=4,n.once("value");case 4:return c=e.sent,e.t0=C,e.next=8,c.val();case 8:return e.t1=e.sent,o=(0,e.t0)(e.t1),d=t.child("users"),e.next=13,d.once("value");case 13:v=e.sent,f=Object.keys(v.val()),i=0;case 16:if(!(i<o.length)){e.next=25;break}if(!f[i]){e.next=22;break}return h=o[i],m=t.child("users"),e.next=22,m.child(f[i]).update({role:h});case 22:i++,e.next=16;break;case 25:t.update({day:1});case 26:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e){return R.apply(this,arguments)}function R(){return(R=Object(n.a)(regeneratorRuntime.mark((function e(r){var t,n,c,d,v,f,h,m,x,y,i,k,O,_,w,j,T,E,D,R,L;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l(r),n=t.child("turn"),e.next=4,n.once("value");case 4:return c=e.sent,d=t.child("day"),e.next=8,d.once("value");case 8:return v=e.sent,f=t.child("users"),e.next=12,f.once("value");case 12:return h=e.sent,m=Object.keys(h.val()),e.next=16,c.val();case 16:x=e.sent,y=x+1,e.t0=x,e.next=e.t0===o.c.WAITING?21:e.t0===o.c.DAY?25:e.t0===o.c.CHAT?27:e.t0===o.c.VOTE?36:e.t0===o.c.VOTE_RESULT?53:e.t0===o.c.NIGHT?66:98;break;case 21:return e.next=23,d.set(v.val()+1);case 23:return y=o.c.DAY,e.abrupt("break",98);case 25:return y=o.c.CHAT,e.abrupt("break",98);case 27:i=1;case 28:if(!(i<m.length)){e.next=34;break}return e.next=31,f.child(m[i]).update({votedCnt:0});case 31:i++,e.next=28;break;case 34:return y=o.c.VOTE,e.abrupt("break",98);case 36:k="",O=0,_=1;case 39:if(!(_<m.length)){e.next=48;break}return w=m[_],e.next=43,f.child(w).once("value");case 43:(j=e.sent).val().votedCnt>O&&(O=j.val().votedCnt,k=w);case 45:_++,e.next=39;break;case 48:if(0===O){e.next=51;break}return e.next=51,f.child(k).update({isDead:!0,deathOfDay:v.val()});case 51:return y=o.c.VOTE_RESULT,e.abrupt("break",98);case 53:return e.next=55,A(r);case 55:T=e.sent,e.t1=T,e.next=e.t1===o.a.NONE?59:61;break;case 59:return y=o.c.NIGHT,e.abrupt("break",65);case 61:return e.next=63,t.update({win:T});case 63:return y=o.c.END,e.abrupt("break",65);case 65:return e.abrupt("break",98);case 66:E=0;case 67:if(!(E<m.length)){e.next=83;break}return D=m[E],e.next=71,f.child(D).once("value");case 71:if((R=e.sent).val().deathOfDay!==v.val()){e.next=75;break}return e.next=75,f.child(D).update({isDead:!0});case 75:if(!R.val().isGuarded){e.next=78;break}return e.next=78,f.child(D).update({isDead:!1,deathOfDay:"",isGuarded:!1});case 78:return e.next=80,f.child(D).update({done:!1});case 80:E++,e.next=67;break;case 83:return e.next=85,d.set(v.val()+1);case 85:return e.next=87,A(r);case 87:L=e.sent,e.t2=L,e.next=e.t2===o.a.NONE?91:93;break;case 91:return y=o.c.DAY,e.abrupt("break",97);case 93:return e.next=95,t.update({win:L});case 95:return y=o.c.END,e.abrupt("break",97);case 97:return e.abrupt("break",98);case 98:return e.next=100,n.set(y);case 100:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e,r){return I.apply(this,arguments)}function I(){return(I=Object(n.a)(regeneratorRuntime.mark((function e(r,t){var n,c,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l(r),c=n.child("users"),e.next=4,c.child(t).once("value");case 4:return o=e.sent,e.next=7,c.child(t).update({votedCnt:o.val().votedCnt+1});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e,r,t){return V.apply(this,arguments)}function V(){return(V=Object(n.a)(regeneratorRuntime.mark((function e(r,t,n){var c,d,v,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=l(r),d=c.child("day"),e.next=4,d.once("value");case 4:v=e.sent,f=c.child("users"),e.t0=n,e.next=e.t0===o.b.Hunter?9:e.t0===o.b.Professor?12:e.t0===o.b.Werewolf?15:e.t0===o.b.TF?18:21;break;case 9:return e.next=11,f.child(t).update({isGuarded:!0});case 11:case 14:case 17:case 20:return e.abrupt("break",21);case 12:return e.next=14,f.child(t).update({unit:!0});case 15:return e.next=17,f.child(t).update({deathOfDay:v.val()});case 18:return e.next=20,f.child(t).update({unit:!1});case 21:return e.next=23,f.child(t).update({done:!0});case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e){return S.apply(this,arguments)}function S(){return(S=Object(n.a)(regeneratorRuntime.mark((function e(r){var t,n,c,d,v,f,h,i,m,x;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l(r),n=t.child("users"),e.next=4,n.once("value");case 4:c=e.sent,d=Object.keys(c.val()),v=0,f=0,h=0,i=0;case 10:if(!(i<d.length)){e.next=20;break}return m=d[i],e.next=14,n.child(m).once("value");case 14:(x=e.sent).val().unit||v++,x.val().isDead||(o.b[x.val().role].group===o.a.VILLAGE?f++:o.b[x.val().role].group===o.a.WOLF&&h++);case 17:i++,e.next=10;break;case 20:if(alert("nothaveunit: ".concat(v," village: ").concat(f," werewolf: ").concat(h)),v!==d.length){e.next=23;break}return e.abrupt("return",o.a.TF);case 23:if(0!==h){e.next=25;break}return e.abrupt("return",o.a.VILLAGE);case 25:if(!(f<=h)){e.next=27;break}return e.abrupt("return",o.a.WOLF);case 27:return e.abrupt("return",o.a.NONE);case 28:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e){for(var i=e.length-1;i>0;i--){var r=Math.floor(Math.random()*(i+1)),t=e[i];e[i]=e[r],e[r]=t}return e}},467:function(e,r,t){"use strict";t.r(r);t(11),t(12),t(14),t(7),t(17),t(13),t(18);var n=t(3),c=t(87),o=t(438),l=t(440);function d(object,e){var r=Object.keys(object);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(object);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),r.push.apply(r,t)}return r}var v={name:"NightAction",props:{roomId:{type:String,default:"1234"},user:{type:String,default:"test"}},data:function(){return{isSelected:!1,message:""}},computed:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(r){Object(n.a)(e,r,source[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(source,r))}))}return e}({Role:function(){return o.b}},Object(c.d)({room:"getData"})),methods:{divine:function(e){"Werewolf"===this.room.users[e].role?this.message=e+" は人狼です":this.message=e+" は人狼ではありません",this.room.users[e].unit?this.message+=" 単位あり":this.message+=" 単位なし"},guard:function(e){Object(l.c)(this.$route.query.roomId,e,o.b.Hunter)},give:function(e){Object(l.c)(this.$route.query.roomId,e,o.b.Professor)},attack:function(e){Object(l.c)(this.$route.query.roomId,e,o.b.Werewolf)},rob:function(e){Object(l.c)(this.$route.query.roomId,e,o.b.TF)}}},f=v,h=t(96),m=t(138),x=t.n(m),y=t(280),k=t(439),O=t(437),_=t(485),w=t(486),component=Object(h.a)(f,(function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",["Villager"===e.room.users[e.$route.query.user].role?t("v-card",[t("v-card-title",[e._v("祈りましょう")])],1):"Seer"===e.room.users[e.$route.query.user].role?t("v-card",[t("v-card-title",[e._v("誰を占うか決めてください")]),e._v(" "),t("v-row",e._l(e.room.users,(function(u){return t("v-col",{key:u.user},[!u.isDead&e.$route.query.user!==u.user?t("v-card",{staticClass:"elevation-1"},[t("v-card-title",[e._v(e._s(u.user))]),e._v(" "),t("v-card-text",[e.isSelected?t("div",[t("v-btn",{attrs:{disabled:""}},[e._v("\n                占う\n              ")])],1):t("div",[t("v-btn",{attrs:{color:"primary"},on:{click:function(r){e.isSelected=!0,e.divine(u.user)}}},[e._v("\n                占う\n              ")])],1)])],1):e._e()],1)})),1),e._v(" "),t("v-card-text",[e._v(e._s(e.message))])],1):"Hunter"===e.room.users[e.$route.query.user].role?t("v-card",[t("v-card-title",[e._v("誰を守るか決めてください")]),e._v(" "),t("v-row",e._l(e.room.users,(function(u){return t("v-col",{key:u.user},[u.isDead||u.user===e.$route.query.user?e._e():t("v-card",{staticClass:"elevation-1"},[t("v-card-title",[e._v(e._s(u.user))]),e._v(" "),t("v-card-text",[e.isSelected?t("div",[t("v-btn",{attrs:{disabled:""}},[e._v("\n                守る\n              ")])],1):t("div",[t("v-btn",{attrs:{color:"primary"},on:{click:function(r){e.isSelected=!0,e.guard(u.user)}}},[e._v("\n                守る\n              ")])],1)])],1)],1)})),1)],1):"Professor"===e.room.users[e.$route.query.user].role?t("v-card",[t("v-card-title",[e._v("誰に単位を与えるか決めてください")]),e._v(" "),t("v-row",e._l(e.room.users,(function(u){return t("v-col",{key:u.user},[u.isDead||u.user===e.$route.query.user?e._e():t("v-card",{staticClass:"elevation-1"},[t("v-card-title",[e._v(e._s(u.user))]),e._v(" "),t("v-card-text",[e.isSelected?t("div",[t("v-btn",{attrs:{disabled:""}},[e._v("\n                与える\n              ")])],1):t("div",[t("v-btn",{attrs:{color:"primary"},on:{click:function(r){e.isSelected=!0,e.give(u.user)}}},[e._v("\n                与える\n              ")])],1)])],1)],1)})),1)],1):"Werewolf"===e.room.users[e.$route.query.user].role?t("v-card",[t("v-card-title",[e._v("誰を襲うか決めてください")]),e._v(" "),t("v-row",e._l(e.room.users,(function(u){return t("v-col",{key:u.user},[u.isDead||u.user===e.$route.query.user?e._e():t("v-card",{staticClass:"elevation-1"},[t("v-card-title",[e._v(e._s(u.user))]),e._v(" "),t("v-card-text",[e.isSelected?t("div",[t("v-btn",{attrs:{disabled:""}},[e._v("\n                襲う\n              ")])],1):t("div",[t("v-btn",{attrs:{color:"primary"},on:{click:function(r){e.isSelected=!0,e.attack(u.user)}}},[e._v("\n                襲う\n              ")])],1)])],1)],1)})),1)],1):"TF"===e.room.users[e.$route.query.user].role?t("v-card",[t("v-card-title",[e._v("誰を落単させるか決めてください")]),e._v(" "),t("v-row",e._l(e.room.users,(function(u){return t("v-col",{key:u.user},[u.isDead||u.user===e.$route.query.user?e._e():t("v-card",{staticClass:"elevation-1"},[t("v-card-title",[e._v(e._s(u.user))]),e._v(" "),t("v-card-text",[e.isSelected?t("div",[t("v-btn",{attrs:{disabled:""}},[e._v("\n                落単させる\n              ")])],1):t("div",[t("v-btn",{attrs:{color:"primary"},on:{click:function(r){e.isSelected=!0,e.rob(u.user)}}},[e._v("\n                落単させる\n              ")])],1)])],1)],1)})),1)],1):e._e()],1)}),[],!1,null,null,null);r.default=component.exports;x()(component,{VBtn:y.a,VCard:k.a,VCardText:O.b,VCardTitle:O.c,VCol:_.a,VRow:w.a})}}]);