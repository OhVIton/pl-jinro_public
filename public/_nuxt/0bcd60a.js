(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{438:function(e,t,r){"use strict";r.d(t,"c",(function(){return n})),r.d(t,"a",(function(){return c})),r.d(t,"e",(function(){return o})),r.d(t,"d",(function(){return l})),r.d(t,"b",(function(){return d}));var n={WAITING:0,DAY:1,CHAT:2,VOTE:3,VOTE_RESULT:4,NIGHT:5,END:-1},c={NONE:0,VILLAGE:1,WOLF:2,TF:3};function o(e){switch(e){case n.WAITING:return"待機中";case n.DAY:return"昼";case n.CHAT:return"チャット";case n.VOTE:return"投票";case n.NIGHT:return"夜";default:return"終了"}}function l(e){switch(e){case c.NONE:return"なし";case c.VILLAGE:return"学生側";case c.WOLF:return"人狼側";case c.TF:return"一限"}}var d={Villager:{name:"学生",description:"単位を死守して卒業を勝ち取れ！",group:c.VILLAGE},Seer:{name:"教務課",description:"人狼かどうかや単位状況を見れる",group:c.VILLAGE},Hunter:{name:"先輩",description:"落単、除籍から守れる。しかし、人狼を守ると除籍されます。",group:c.VILLAGE},Professor:{name:"教授",description:"単位を与えることができる",group:c.VILLAGE},Werewolf:{name:"退学者",description:"選んだ学生を除籍させる",group:c.WOLF},TF:{name:"一限",description:"単位を落とすことができる",group:c.TF}}},440:function(e,t,r){"use strict";r.d(t,"e",(function(){return d})),r.d(t,"f",(function(){return v})),r.d(t,"d",(function(){return h})),r.d(t,"b",(function(){return k})),r.d(t,"g",(function(){return O})),r.d(t,"i",(function(){return j})),r.d(t,"a",(function(){return R})),r.d(t,"h",(function(){return T})),r.d(t,"j",(function(){return N})),r.d(t,"c",(function(){return V}));var n=r(33),c=(r(11),r(36),r(113),r(209)),o=r(438),l=function(e){return null===e?c.a.ref(c.a,"rooms/"):c.a.ref("rooms/".concat(e))};function d(e){return f.apply(this,arguments)}function f(){return(f=Object(n.a)(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l(t),e.next=3,r.once("value");case 3:return n=e.sent,e.abrupt("return",n.exists());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e,t){return x.apply(this,arguments)}function x(){return(x=Object(n.a)(regeneratorRuntime.mark((function e(t,r){var n,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l(t),e.next=3,n.child("users/").once("value");case 3:if(!(c=e.sent).exists()){e.next=10;break}return e.next=7,r;case 7:return e.t0=e.sent,e.t1=c.val(),e.abrupt("return",e.t0 in e.t1);case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return m.apply(this,arguments)}function m(){return(m=Object(n.a)(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l(t),e.next=3,r.once("value");case 3:return n=e.sent,e.abrupt("return",n.child("day").val()>0);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e,t,r){return w.apply(this,arguments)}function w(){return(w=Object(n.a)(regeneratorRuntime.mark((function e(t,r,n){var c,d,i,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(d in c=[],n)for(i=0;i<n[d];i++)c.push(d);return f=l(t),e.next=5,f.set({owner:r,day:0,turn:0,roles:c,messages:[],win:o.a.NONE});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e,t){return y.apply(this,arguments)}function y(){return(y=Object(n.a)(regeneratorRuntime.mark((function e(t,r){var n,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l(t),c=n.child("users"),e.next=4,c.child(r).set({user:r,role:"",done:!1,isDead:!1,unit:!0,deathOfDay:"",isGuarded:!1,votedCnt:0});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e,t,r,n){return I.apply(this,arguments)}function I(){return(I=Object(n.a)(regeneratorRuntime.mark((function e(t,r,n,c){var o,d,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=l(t),d=o.child("messages"),f=d.push().key,e.next=5,d.child(f).set({user:r,message:n,day:c});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e){return E.apply(this,arguments)}function E(){return(E=Object(n.a)(regeneratorRuntime.mark((function e(t){var r,n,c,o,d,f,v,i,x,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l(t),n=r.child("roles"),e.next=4,n.once("value");case 4:return c=e.sent,e.t0=C,e.next=8,c.val();case 8:return e.t1=e.sent,o=(0,e.t0)(e.t1),d=r.child("users"),e.next=13,d.once("value");case 13:f=e.sent,v=Object.keys(f.val()),i=0;case 16:if(!(i<o.length)){e.next=25;break}if(!v[i]){e.next=22;break}return x=o[i],h=r.child("users"),e.next=22,h.child(v[i]).update({role:x});case 22:i++,e.next=16;break;case 25:r.update({day:1});case 26:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return D.apply(this,arguments)}function D(){return(D=Object(n.a)(regeneratorRuntime.mark((function e(t){var r,n,c,d,f,v,x,h,m,k,i,w,O,y,j,I,R,E,T,D,N;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l(t),n=r.child("turn"),e.next=4,n.once("value");case 4:return c=e.sent,d=r.child("day"),e.next=8,d.once("value");case 8:return f=e.sent,v=r.child("users"),e.next=12,v.once("value");case 12:return x=e.sent,h=Object.keys(x.val()),e.next=16,c.val();case 16:m=e.sent,k=m+1,e.t0=m,e.next=e.t0===o.c.WAITING?21:e.t0===o.c.DAY?25:e.t0===o.c.CHAT?27:e.t0===o.c.VOTE?36:e.t0===o.c.VOTE_RESULT?53:e.t0===o.c.NIGHT?66:98;break;case 21:return e.next=23,d.set(f.val()+1);case 23:return k=o.c.DAY,e.abrupt("break",98);case 25:return k=o.c.CHAT,e.abrupt("break",98);case 27:i=1;case 28:if(!(i<h.length)){e.next=34;break}return e.next=31,v.child(h[i]).update({votedCnt:0});case 31:i++,e.next=28;break;case 34:return k=o.c.VOTE,e.abrupt("break",98);case 36:w="",O=0,y=1;case 39:if(!(y<h.length)){e.next=48;break}return j=h[y],e.next=43,v.child(j).once("value");case 43:(I=e.sent).val().votedCnt>O&&(O=I.val().votedCnt,w=j);case 45:y++,e.next=39;break;case 48:if(0===O){e.next=51;break}return e.next=51,v.child(w).update({isDead:!0,deathOfDay:f.val()});case 51:return k=o.c.VOTE_RESULT,e.abrupt("break",98);case 53:return e.next=55,A(t);case 55:R=e.sent,e.t1=R,e.next=e.t1===o.a.NONE?59:61;break;case 59:return k=o.c.NIGHT,e.abrupt("break",65);case 61:return e.next=63,r.update({win:R});case 63:return k=o.c.END,e.abrupt("break",65);case 65:return e.abrupt("break",98);case 66:E=0;case 67:if(!(E<h.length)){e.next=83;break}return T=h[E],e.next=71,v.child(T).once("value");case 71:if((D=e.sent).val().deathOfDay!==f.val()){e.next=75;break}return e.next=75,v.child(T).update({isDead:!0});case 75:if(!D.val().isGuarded){e.next=78;break}return e.next=78,v.child(T).update({isDead:!1,deathOfDay:"",isGuarded:!1});case 78:return e.next=80,v.child(T).update({done:!1});case 80:E++,e.next=67;break;case 83:return e.next=85,d.set(f.val()+1);case 85:return e.next=87,A(t);case 87:N=e.sent,e.t2=N,e.next=e.t2===o.a.NONE?91:93;break;case 91:return k=o.c.DAY,e.abrupt("break",97);case 93:return e.next=95,r.update({win:N});case 95:return k=o.c.END,e.abrupt("break",97);case 97:return e.abrupt("break",98);case 98:return e.next=100,n.set(k);case 100:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e,t){return L.apply(this,arguments)}function L(){return(L=Object(n.a)(regeneratorRuntime.mark((function e(t,r){var n,c,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l(t),c=n.child("users"),e.next=4,c.child(r).once("value");case 4:return o=e.sent,e.next=7,c.child(r).update({votedCnt:o.val().votedCnt+1});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e,t,r){return _.apply(this,arguments)}function _(){return(_=Object(n.a)(regeneratorRuntime.mark((function e(t,r,n){var c,d,f,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=l(t),d=c.child("day"),e.next=4,d.once("value");case 4:f=e.sent,v=c.child("users"),e.t0=n,e.next=e.t0===o.b.Hunter?9:e.t0===o.b.Professor?12:e.t0===o.b.Werewolf?15:e.t0===o.b.TF?18:21;break;case 9:return e.next=11,v.child(r).update({isGuarded:!0});case 11:case 14:case 17:case 20:return e.abrupt("break",21);case 12:return e.next=14,v.child(r).update({unit:!0});case 15:return e.next=17,v.child(r).update({deathOfDay:f.val()});case 18:return e.next=20,v.child(r).update({unit:!1});case 21:return e.next=23,v.child(r).update({done:!0});case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e){return G.apply(this,arguments)}function G(){return(G=Object(n.a)(regeneratorRuntime.mark((function e(t){var r,n,c,d,f,v,x,i,h,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l(t),n=r.child("users"),e.next=4,n.once("value");case 4:c=e.sent,d=Object.keys(c.val()),f=0,v=0,x=0,i=0;case 10:if(!(i<d.length)){e.next=20;break}return h=d[i],e.next=14,n.child(h).once("value");case 14:(m=e.sent).val().unit||f++,m.val().isDead||(o.b[m.val().role].group===o.a.VILLAGE?v++:o.b[m.val().role].group===o.a.WOLF&&x++);case 17:i++,e.next=10;break;case 20:if(alert("nothaveunit: ".concat(f," village: ").concat(v," werewolf: ").concat(x)),f!==d.length){e.next=23;break}return e.abrupt("return",o.a.TF);case 23:if(0!==x){e.next=25;break}return e.abrupt("return",o.a.VILLAGE);case 25:if(!(v<=x)){e.next=27;break}return e.abrupt("return",o.a.WOLF);case 27:return e.abrupt("return",o.a.NONE);case 28:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e){for(var i=e.length-1;i>0;i--){var t=Math.floor(Math.random()*(i+1)),r=e[i];e[i]=e[t],e[t]=r}return e}},484:function(e,t,r){var n=r(8),c=r(203),o=r(97);n({target:"Object",stat:!0},{fromEntries:function(e){var t={};return c(e,(function(e,r){o(t,e,r)}),{AS_ENTRIES:!0}),t}})},489:function(e,t,r){"use strict";r.r(t);var n=r(33),c=(r(113),r(484),r(66),r(11),r(89),r(440)),o=r(438),l={name:"JinroIndex",data:function(){return{roomId:"",joinUser:"",owner:"",ownId:"",rolesBreakDown:Object.fromEntries(Object.keys(o.b).map((function(e){return[e,0]})))}},computed:{Role:function(){return o.b}},methods:{start:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c.e)(e.ownId);case 2:if(!t.sent){t.next=5;break}return alert("すでに使用されているルームIDです"),t.abrupt("return");case 5:Object(c.b)(e.ownId,e.owner,e.rolesBreakDown),e.join(e.ownId,e.owner);case 7:case"end":return t.stop()}}),t)})))()},join:function(e,t){var r=this;return Object(n.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(c.e)(e);case 2:if(n.sent){n.next=5;break}return alert("ルームが存在しません"),n.abrupt("return");case 5:return n.next=7,Object(c.d)(e);case 7:if(!n.sent){n.next=10;break}return alert("ゲームが開始されています"),n.abrupt("return");case 10:return n.next=12,Object(c.f)(e,t);case 12:if(!n.sent){n.next=15;break}if(confirm("すでに使用されているユーザー名ですが、上書きしますか？")){n.next=15;break}return n.abrupt("return");case 15:Object(c.g)(e,t),r.$router.push({path:"jinroGame",query:{roomId:e,user:t}});case 17:case"end":return n.stop()}}),n)})))()}}},d=r(96),f=r(138),v=r.n(f),x=r(280),h=r(439),m=r(437),k=r(485),w=r(432),O=r(486),y=r(487),component=Object(d.a)(l,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-main",[r("v-card",[r("v-row",{attrs:{justify:"center"}}),e._v(" "),r("v-card-text",[r("v-card",[r("v-card-title",[e._v("ルームを作成")]),e._v(" "),r("v-card-text",[r("v-text-field",{attrs:{label:"Room ID"},model:{value:e.ownId,callback:function(t){e.ownId=t},expression:"ownId"}}),e._v(" "),r("v-text-field",{attrs:{label:"UserName"},model:{value:e.owner,callback:function(t){e.owner=t},expression:"owner"}}),e._v(" "),r("v-row",e._l(e.Role,(function(t,n){return r("v-col",{key:n,attrs:{type:"number"}},[r("v-text-field",{attrs:{label:t.name,cols:"3",type:"number"},model:{value:e.rolesBreakDown[n],callback:function(t){e.$set(e.rolesBreakDown,n,e._n(t))},expression:"rolesBreakDown[index]"}})],1)})),1),e._v(" "),""!=e.ownId&""!=e.owner?r("v-btn",{attrs:{type:"number",nuxt:""},on:{click:function(t){return e.start()}}},[e._v("\n            Start\n          ")]):r("v-btn",{attrs:{disabled:""}},[e._v("\n            Start\n          ")])],1)],1)],1),e._v(" "),r("v-card-text",[r("v-card",[r("v-card-title",[e._v("ルームに参加")]),e._v(" "),r("v-card-text",[r("v-text-field",{attrs:{label:"Room ID"},model:{value:e.roomId,callback:function(t){e.roomId=t},expression:"roomId"}}),e._v(" "),r("v-text-field",{attrs:{label:"UserName"},model:{value:e.joinUser,callback:function(t){e.joinUser=t},expression:"joinUser"}}),e._v(" "),""!=e.roomId&""!=e.joinUser?r("v-btn",{attrs:{nuxt:""},on:{click:function(t){return e.join(e.roomId,e.joinUser)}}},[e._v("\n            Join\n          ")]):r("v-btn",{attrs:{disabled:""}},[e._v("\n            Join\n          ")])],1)],1)],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;v()(component,{VBtn:x.a,VCard:h.a,VCardText:m.b,VCardTitle:m.c,VCol:k.a,VMain:w.a,VRow:O.a,VTextField:y.a})}}]);