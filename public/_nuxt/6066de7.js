(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{438:function(e,t,r){"use strict";r.d(t,"c",(function(){return n})),r.d(t,"a",(function(){return c})),r.d(t,"e",(function(){return o})),r.d(t,"d",(function(){return d})),r.d(t,"b",(function(){return l}));var n={WAITING:0,DAY:1,CHAT:2,VOTE:3,VOTE_RESULT:4,NIGHT:5,END:-1},c={NONE:0,VILLAGE:1,WOLF:2,TF:3};function o(e){switch(e){case n.WAITING:return"待機中";case n.DAY:return"昼";case n.CHAT:return"チャット";case n.VOTE:return"投票";case n.NIGHT:return"夜";default:return"終了"}}function d(e){switch(e){case c.NONE:return"なし";case c.VILLAGE:return"学生側";case c.WOLF:return"人狼側";case c.TF:return"一限"}}var l={Villager:{name:"学生",description:"単位を死守して卒業を勝ち取れ！",group:c.VILLAGE},Seer:{name:"教務課",description:"人狼かどうかや単位状況を見れる",group:c.VILLAGE},Hunter:{name:"先輩",description:"落単、除籍から守れる。しかし、人狼を守ると除籍されます。",group:c.VILLAGE},Professor:{name:"教授",description:"単位を与えることができる",group:c.VILLAGE},Werewolf:{name:"退学者",description:"選んだ学生を除籍させる",group:c.WOLF},TF:{name:"一限",description:"単位を落とすことができる",group:c.TF}}},440:function(e,t,r){"use strict";r.d(t,"e",(function(){return l})),r.d(t,"f",(function(){return v})),r.d(t,"d",(function(){return x})),r.d(t,"b",(function(){return O})),r.d(t,"g",(function(){return y})),r.d(t,"i",(function(){return j})),r.d(t,"a",(function(){return T})),r.d(t,"h",(function(){return D})),r.d(t,"j",(function(){return L})),r.d(t,"c",(function(){return A}));var n=r(33),c=(r(11),r(36),r(113),r(209)),o=r(438),d=function(e){return null===e?c.a.ref(c.a,"rooms/"):c.a.ref("rooms/".concat(e))};function l(e){return f.apply(this,arguments)}function f(){return(f=Object(n.a)(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d(t),e.next=3,r.once("value");case 3:return n=e.sent,e.abrupt("return",n.exists());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e,t){return h.apply(this,arguments)}function h(){return(h=Object(n.a)(regeneratorRuntime.mark((function e(t,r){var n,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d(t),e.next=3,n.child("users/").once("value");case 3:if(!(c=e.sent).exists()){e.next=10;break}return e.next=7,r;case 7:return e.t0=e.sent,e.t1=c.val(),e.abrupt("return",e.t0 in e.t1);case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){return m.apply(this,arguments)}function m(){return(m=Object(n.a)(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d(t),e.next=3,r.once("value");case 3:return n=e.sent,e.abrupt("return",n.child("day").val()>0);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e,t,r){return k.apply(this,arguments)}function k(){return(k=Object(n.a)(regeneratorRuntime.mark((function e(t,r,n){var c,l,i,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(l in c=[],n)for(i=0;i<n[l];i++)c.push(l);return f=d(t),e.next=5,f.set({owner:r,day:0,turn:0,roles:c,messages:[],win:o.a.NONE});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e,t){return w.apply(this,arguments)}function w(){return(w=Object(n.a)(regeneratorRuntime.mark((function e(t,r){var n,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d(t),c=n.child("users"),e.next=4,c.child(r).set({user:r,role:"",done:!1,isDead:!1,unit:!0,deathOfDay:"",isGuarded:!1,votedCnt:0});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e,t,r,n){return E.apply(this,arguments)}function E(){return(E=Object(n.a)(regeneratorRuntime.mark((function e(t,r,n,c){var o,l,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=d(t),l=o.child("messages"),f=l.push().key,e.next=5,l.child(f).set({user:r,message:n,day:c});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return R.apply(this,arguments)}function R(){return(R=Object(n.a)(regeneratorRuntime.mark((function e(t){var r,n,c,o,l,f,v,i,h,x;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d(t),n=r.child("roles"),e.next=4,n.once("value");case 4:return c=e.sent,e.t0=_,e.next=8,c.val();case 8:return e.t1=e.sent,o=(0,e.t0)(e.t1),l=r.child("users"),e.next=13,l.once("value");case 13:f=e.sent,v=Object.keys(f.val()),i=0;case 16:if(!(i<o.length)){e.next=25;break}if(!v[i]){e.next=22;break}return h=o[i],x=r.child("users"),e.next=22,x.child(v[i]).update({role:h});case 22:i++,e.next=16;break;case 25:r.update({day:1});case 26:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e){return V.apply(this,arguments)}function V(){return(V=Object(n.a)(regeneratorRuntime.mark((function e(t){var r,n,c,l,f,v,h,x,m,O,i,k,y,w,j,E,T,R,D,V,L;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d(t),n=r.child("turn"),e.next=4,n.once("value");case 4:return c=e.sent,l=r.child("day"),e.next=8,l.once("value");case 8:return f=e.sent,v=r.child("users"),e.next=12,v.once("value");case 12:return h=e.sent,x=Object.keys(h.val()),e.next=16,c.val();case 16:m=e.sent,O=m+1,e.t0=m,e.next=e.t0===o.c.WAITING?21:e.t0===o.c.DAY?25:e.t0===o.c.CHAT?27:e.t0===o.c.VOTE?36:e.t0===o.c.VOTE_RESULT?53:e.t0===o.c.NIGHT?66:98;break;case 21:return e.next=23,l.set(f.val()+1);case 23:return O=o.c.DAY,e.abrupt("break",98);case 25:return O=o.c.CHAT,e.abrupt("break",98);case 27:i=1;case 28:if(!(i<x.length)){e.next=34;break}return e.next=31,v.child(x[i]).update({votedCnt:0});case 31:i++,e.next=28;break;case 34:return O=o.c.VOTE,e.abrupt("break",98);case 36:k="",y=0,w=1;case 39:if(!(w<x.length)){e.next=48;break}return j=x[w],e.next=43,v.child(j).once("value");case 43:(E=e.sent).val().votedCnt>y&&(y=E.val().votedCnt,k=j);case 45:w++,e.next=39;break;case 48:if(0===y){e.next=51;break}return e.next=51,v.child(k).update({isDead:!0,deathOfDay:f.val()});case 51:return O=o.c.VOTE_RESULT,e.abrupt("break",98);case 53:return e.next=55,I(t);case 55:T=e.sent,e.t1=T,e.next=e.t1===o.a.NONE?59:61;break;case 59:return O=o.c.NIGHT,e.abrupt("break",65);case 61:return e.next=63,r.update({win:T});case 63:return O=o.c.END,e.abrupt("break",65);case 65:return e.abrupt("break",98);case 66:R=0;case 67:if(!(R<x.length)){e.next=83;break}return D=x[R],e.next=71,v.child(D).once("value");case 71:if((V=e.sent).val().deathOfDay!==f.val()){e.next=75;break}return e.next=75,v.child(D).update({isDead:!0});case 75:if(!V.val().isGuarded){e.next=78;break}return e.next=78,v.child(D).update({isDead:!1,deathOfDay:"",isGuarded:!1});case 78:return e.next=80,v.child(D).update({done:!1});case 80:R++,e.next=67;break;case 83:return e.next=85,l.set(f.val()+1);case 85:return e.next=87,I(t);case 87:L=e.sent,e.t2=L,e.next=e.t2===o.a.NONE?91:93;break;case 91:return O=o.c.DAY,e.abrupt("break",97);case 93:return e.next=95,r.update({win:L});case 95:return O=o.c.END,e.abrupt("break",97);case 97:return e.abrupt("break",98);case 98:return e.next=100,n.set(O);case 100:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e,t){return N.apply(this,arguments)}function N(){return(N=Object(n.a)(regeneratorRuntime.mark((function e(t,r){var n,c,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d(t),c=n.child("users"),e.next=4,c.child(r).once("value");case 4:return o=e.sent,e.next=7,c.child(r).update({votedCnt:o.val().votedCnt+1});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e,t,r){return G.apply(this,arguments)}function G(){return(G=Object(n.a)(regeneratorRuntime.mark((function e(t,r,n){var c,l,f,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=d(t),l=c.child("day"),e.next=4,l.once("value");case 4:f=e.sent,v=c.child("users"),e.t0=n,e.next=e.t0===o.b.Hunter?9:e.t0===o.b.Professor?12:e.t0===o.b.Werewolf?15:e.t0===o.b.TF?18:21;break;case 9:return e.next=11,v.child(r).update({isGuarded:!0});case 11:case 14:case 17:case 20:return e.abrupt("break",21);case 12:return e.next=14,v.child(r).update({unit:!0});case 15:return e.next=17,v.child(r).update({deathOfDay:f.val()});case 18:return e.next=20,v.child(r).update({unit:!1});case 21:return e.next=23,v.child(r).update({done:!0});case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e){return C.apply(this,arguments)}function C(){return(C=Object(n.a)(regeneratorRuntime.mark((function e(t){var r,n,c,l,f,v,h,i,x,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d(t),n=r.child("users"),e.next=4,n.once("value");case 4:c=e.sent,l=Object.keys(c.val()),f=0,v=0,h=0,i=0;case 10:if(!(i<l.length)){e.next=20;break}return x=l[i],e.next=14,n.child(x).once("value");case 14:(m=e.sent).val().unit||f++,m.val().isDead||(o.b[m.val().role].group===o.a.VILLAGE?v++:o.b[m.val().role].group===o.a.WOLF&&h++);case 17:i++,e.next=10;break;case 20:if(alert("nothaveunit: ".concat(f," village: ").concat(v," werewolf: ").concat(h)),f!==l.length){e.next=23;break}return e.abrupt("return",o.a.TF);case 23:if(0!==h){e.next=25;break}return e.abrupt("return",o.a.VILLAGE);case 25:if(!(v<=h)){e.next=27;break}return e.abrupt("return",o.a.WOLF);case 27:return e.abrupt("return",o.a.NONE);case 28:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e){for(var i=e.length-1;i>0;i--){var t=Math.floor(Math.random()*(i+1)),r=e[i];e[i]=e[t],e[t]=r}return e}},449:function(e,t,r){"use strict";r.r(t);r(11),r(12),r(14),r(7),r(17),r(13),r(18);var n=r(3),c=r(87),o=r(440);function d(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}var l={name:"JinroGame",data:function(){return{isVoted:!1}},computed:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},Object(c.d)({room:"getData"})),methods:{vote:function(e){Object(o.j)(this.$route.query.roomId,e)}}},f=l,v=r(96),h=r(138),x=r.n(h),m=r(280),O=r(439),k=r(437),y=r(485),w=r(486),component=Object(v.a)(f,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-card",[r("v-card-title",[e._v("投票")]),e._v(" "),r("v-card-text",[r("v-row",e._l(e.room.users,(function(t){return r("v-col",{key:t.user},[t.isDead?e._e():r("v-card",{staticClass:"elevation-1"},[r("v-card-title",[e._v(e._s(t.user))]),e._v(" "),r("v-card-text",[e.isVoted||e.room.users[e.$route.query.user].isDead?r("div",[r("v-btn",{attrs:{disabled:""}},[e._v("\n                  投票\n                ")])],1):r("div",[r("v-btn",{attrs:{color:"primary"},on:{click:function(r){e.isVoted=!0,e.vote(t.user)}}},[e._v("\n                  投票\n                ")])],1)])],1)],1)})),1)],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;x()(component,{VBtn:m.a,VCard:O.a,VCardText:k.b,VCardTitle:k.c,VCol:y.a,VRow:w.a})}}]);